<!DOCTYPE html>
<html>
<head>
    <title>Shorten URL</title>
</head>
<body>
    <h2>Shorten Your URL</h2>
    <form method="POST">
        {% csrf_token %}
        <label>Enter URL:</label>
        <input type="url" name="url" required>
        <button type="submit">Shorten</button>
    </form>

    {% if short_url %}
    <h3>Your Short URL:</h3>
    <input type="text" id="shortUrl" value="{{ short_url }}" readonly>
    <button onclick="copyToClipboard()">ðŸ“‹ Copy</button>
    <button onclick="generateQRCode('{{ short_url }}')">ðŸ“· Generate QR Code</button>
    
    <div id="qrCode">
        <img id="qrImage" src="" alt="QR Code">
    </div>
    {% endif %}

    <br>
    <a href="{% url 'dashboard' %}">Go to Dashboard</a>
</body>

<script>
    function copyToClipboard() {
        let shortUrlInput = document.getElementById('shortUrl');
        shortUrlInput.select();
        document.execCommand('copy');
        alert('âœ… Link copied to clipboard!');
    }

    function generateQRCode(shortUrl) {
        let qrImage = document.getElementById('qrImage');
        let qrCodeDiv = document.getElementById('qrCode');
        qrImage.src = shortUrl.replace(window.location.origin, window.location.origin + "/qrcode-svg");
        qrCodeDiv.style.display = "block";
    }
</script>
</html>
